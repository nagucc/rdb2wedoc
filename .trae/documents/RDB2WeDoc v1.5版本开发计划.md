# RDB2WeDoc v1.5版本开发计划

## 1. 支持自动类型转换功能

### 实现步骤
1. **获取目标智能表格字段类型**
   - 修改 `wecom-document.service.ts`，添加获取智能表格字段类型的方法
   - 在数据映射创建/编辑页面中，获取并显示目标字段类型

2. **实现类型转换逻辑**
   - 修改 `sync.service.ts` 中的 `transformData` 方法
   - 根据目标字段类型（text、number、date等）自动转换源数据类型
   - 对于不支持的类型，添加跳过逻辑

3. **前端界面优化**
   - 在数据映射表单中显示目标字段类型
   - 添加类型转换的相关提示信息

## 2. 统一样式的面包屑导航

### 实现步骤
1. **创建面包屑导航组件**
   - 在 `components/layout` 目录下创建 `Breadcrumb.tsx` 组件
   - 实现统一的样式和导航逻辑

2. **集成到页面布局**
   - 修改 `app/layout.tsx` 文件，添加面包屑导航组件
   - 为每个页面配置对应的面包屑导航路径

## 3. 修复中文乱码问题

### 实现步骤
1. **检查编码处理逻辑**
   - 确保 `database.service.ts` 中正确处理了 charset 配置
   - 检查所有数据库类型的连接配置，确保编码设置正确

2. **测试验证**
   - 运行同步作业，验证中文数据是否正确显示
   - 确保数据库连接使用的编码与用户配置一致

## 4. 删除同步作业时删除日志记录

### 实现步骤
1. **修改删除作业逻辑**
   - 找到处理删除同步作业的代码（可能在 `sync-jobs` 相关页面或 API 中）
   - 添加删除相关日志记录的逻辑

2. **验证删除功能**
   - 测试删除同步作业后，相关日志是否也被删除

## 5. 作业运行情况无限循环滚动

### 实现步骤
1. **修改作业运行情况组件**
   - 找到 `/dashboard` 页面中的作业运行情况组件
   - 实现无限循环滚动逻辑，滚动到最后一条后重新从第一条开始

2. **测试滚动功能**
   - 验证滚动效果是否流畅
   - 确保滚动逻辑正确实现

## 6. 活动趋势时间范围选择

### 实现步骤
1. **修改活动趋势组件**
   - 找到 `/dashboard` 页面中的活动趋势组件
   - 添加时间范围选择器（今天、昨天、最近7天、最近30天）

2. **实现数据筛选逻辑**
   - 修改获取活动趋势数据的 API，支持时间范围参数
   - 根据用户选择的时间范围显示相应的数据

3. **测试时间范围选择功能**
   - 验证不同时间范围的数据显示是否正确

## 实施顺序

1. 首先修复中文乱码问题（优先级最高，影响数据正确性）
2. 实现自动类型转换功能（核心新功能）
3. 添加面包屑导航（提升用户体验）
4. 实现删除同步作业时删除日志（数据一致性）
5. 实现作业运行情况无限循环滚动（提升用户体验）
6. 实现活动趋势时间范围选择（提升用户体验）

## 技术要点

- 所有修改都需要遵循现有的代码风格和架构
- 确保修改后的代码通过 lint 和类型检查
- 为新功能添加适当的测试用例
- 确保所有修改都有良好的错误处理和日志记录