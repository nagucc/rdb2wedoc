# 版本规划

## 提示词

## v1.5
- [x] 支持在创建数据映射时，判断智能表格相应字段的类型，如果目标字段是text类型，保持现有逻辑不变；如果目标字段是数字类型，应当自动将源字段的字符串类型或其他类型转换为数字类型；如果目标是日期类型，自动将源字段的字符串类型或其他类型转换为日期类型；如果是其他类型，则提示暂时不支持，可以配置，但在同步时跳过此字段。
- [x] 在每个页面上都加上统一样式的面包屑导航，方便用户在不同页面之间进行跳转。
- [ ] BUG：在同步作业时，写入目标智能表格的数据中文显示的是乱码。需确保读取数据时，连接数据库使用的编码与用户配置的编码一致。
- [x] 确保删除同步作业时，同时删除相应的日志记录。
- [ ] /dashboard中的作业运行情况，应当实现无限循环滚动，滚动到最后一条日志后，再继续从第一条开始继续滚动。
- [x] /dashboard中的“活动趋势”，可由用户选择显示今天、昨天、最近7天、最近30天的活动趋势。

## v1.4
- [x] 增加使用mysql数据库管理同步作业的日志功能，运维人员可以通过配置文件选中使用mysql还是默认的使用文件的日志存储方式。
- [x] 删除数据映射时，页面上虽然显示删除成功，但实际上配置文件还在，应当在删除数据映射后，同时删除相应的配置文件。
- [x] 新增一个github action，每次发布到production分支时，自动触发docker构建，构建为amd64架构的镜像，镜像标签为版本号，例如：1.4.0-amd64。同时将镜像tar包release到github release中。

## v1.3

### 修复补丁
- [x] 在创建数据映射页面中
    -[x] 使用AI智能匹配功能时，首先要根据目标字段判断字段映射是否已经存在，若已存在，则直接返回该字段映射，仅对未存在的目标字段进行AI推荐。当AI推理结束后，确保字段映射清单没有重复的目标字段。
    - [x] 选择数据库表的列表中，列表项目显示为“数据库表(注释)”，例如：“users(用户表)”。
- [x] 在编辑数据映射页面中
    - [x] 编辑数据映射时，目标企业微信字段未被选中，此处应当选中之前已经保存的字段
    - [x] 编辑数据映射时，如果所有字段映射都被删除，数据源和目标相关选项也应该取消锁定
- [x] 同步作业管理页面
    - [x] 作业列表中，应当显示每个作业的同步周期
- [x] 创建或编辑同步作业时，在同步周期旁边显示当前服务器时间，因为服务器的时区与用户所在时区可能不同，用户需要根据服务器时间来设置同步周期。

### 新功能
- [x] 创建数据源页面
    - [x] 数据源配置页面中，新增一个可选字段“字符集(charset)”，用于指定连接数据库时使用的字符集。默认值为“latin1”。


## v1.2
### 新功能
- [x] 创建数据映射，进行字段映射配置时，实现AI自动推荐字段映射。具体要求：
    -[x] 在创建数据映射的页面/mapping/create中增加一个按钮“AI智能匹配”，点击后触发AI推荐字段映射过程。
    -[x] 根据用户已经选定的源数据库表的字段名称、字段注释等信息，结合目标智能表格的字段名称等信息，调用OpenAI兼容的AI API，请求AI模型进行智能匹配推荐。
    -[x] 调用AI时，注意提醒AI每个目标字段只能映射一个源数据库表字段，不能多个源字段映射到一个目标字段。
    -[x] 推荐结果应是JSON格式，包含系统中创建数据映射时需要的字段映射信息，如源数据库表字段名称、目标智能表格字段名称、映射关系等。
    -[x] 根据从AI得到的JSON格式推荐结果，自动将结果填充到页面的字段映射列表中，方便用户后续手动调整或确认。
    -[x] AI API相关的配置，如API地址、API密钥等，应在系统的配置文件中进行设置，确保安全性和可维护性。
    -[x] 所有配置应该放在/config目录下config.json文件中，方便系统管理员进行配置和维护。

### 修复补丁
- [x] 数据映射不再需要“状态”字段，将其从页面、type等处删去，并检查整个系统代码，确保不再依赖或使用该字段。
- [x] 检查系统所用的配置，确保所有系统级配置都存放在/config目录下config.json文件中，方便系统管理员进行配置和维护。


## 未编入规划的计划
- [ ] 使用antd框架重新设计用户界面，提高用户体验和操作便利性。
- [ ] 增加对其他数据库的支持，如PostgreSQL、SQLite等。

